apiVersion: grafana.integreatly.org/v1beta1
kind: GrafanaContactPoint
metadata:
  name: inchident-telegram-contact
spec:
  name: inchident-telegram-contact
  type: telegram
  instanceSelector:
    matchLabels:
      dashboards: grafana
  settings: {}
  #   message: '{{ template "default.message" . }}'
  valuesFrom:
    - targetPath: bottoken
      valueFrom:
        secretKeyRef:
          name: inchident-bot-secret
          key: token
    - targetPath: chatid
      valueFrom:
        secretKeyRef:
          name: inchident-bot-secret
          key: chat_id
---
apiVersion: grafana.integreatly.org/v1beta1
kind: GrafanaNotificationPolicy
metadata:
  name: telegram-passthrough-policy
spec:
  instanceSelector:
    matchLabels:
      dashboards: grafana
  route:
    receiver: inchident-telegram-contact
    group_by:
      - grafana_folder
      - alertname
